# ===================================================================
# NewSky Configuration
#
# Design:
# - `server`   : per-server identity (the only section that usually differs)
# - everything else: usually the same across all servers in the network
# ===================================================================

# ===================================================================
# Server Identity (per-server)
# ===================================================================
server:
  # Must match the server name in your BungeeCord / Velocity config.
  name: "server1"

  # If true, this server acts as a lobby-only node and will NOT load islands.
  lobby-only: false


# ===================================================================
# Database
# ===================================================================
# Stores persistent island/player data.
mysql:
  host: "localhost"
  port: 3306
  database: "newsky"
  username: "root"
  password: "password"

  # Whether to use SSL for the database connection.
  use-ssl: false
  # JDBC properties appended to the connection URL.
  # Must keep AT LEAST ONE property. (Format requires at least one key=value pair.)
  # Format: "key1=value1&key2=value2"
  # Example: "autoReconnect=true&useUnicode=true&characterEncoding=utf8"
  properties: "autoReconnect=true&useUnicode=true&characterEncoding=utf8"

  # Table prefix for all plugin tables.
  prefix: "newsky_"

# ===================================================================
# Redis
# ===================================================================
# Used for cross-server communication and centralized caching.
redis:
  host: "localhost"
  port: 6379
  password: ""

  # Use these to separate multiple independent NewSky networks sharing the same Redis.
  database: 0

  # Pub/Sub channels (should be identical on all servers in the same network).
  channel:
    cache: "newsky-cache-channel-0"
    island: "newsky-island-channel-0"


# ===================================================================
# Network
# ===================================================================
network:
  # Heartbeat period (seconds).
  # Other servers use this to detect whether this server is still active.
  heartbeat-interval-seconds: 5

  # Server selection strategy used when choosing an island server / lobby server.
  # Options: "random", "round-robin", "mspt"
  selector: "round-robin"

  # MSPT refresh period (seconds). Only used when selector = "mspt".
  mspt-update-interval-seconds: 10


# ===================================================================
# Lobby Fallback
# ===================================================================
# Where players are sent when they must leave an island forcibly
# (e.g., island unload/delete/lock, expelled, etc.).
lobby:
  # Names must match BungeeCord / Velocity server names.
  # Multiple servers are supported for load balancing.
  server-names:
    - "lobby"

  # Lobby world name (must exist on all lobby servers above).
  world-name: "world"

  # Fallback spawn location inside the lobby world.
  location:
    x: 0.0
    y: 100.0
    z: 0.0
    yaw: 0.0
    pitch: 0.0


# ===================================================================
# Island
# ===================================================================
island:
  # Template world folder name under the plugin template directory.
  template: "default"

  # Island size (100 means 100x100).
  size: 100

  # Default island spawn position.
  spawn:
    x: 0
    y: 132
    z: 0
    yaw: 180
    pitch: 0

  # Inactive island unload check interval (seconds).
  island-unload-interval-seconds: 300

  # Gamerules applied to island worlds when they are loaded.
  gamerules:
    keepInventory: true
    doImmediateRespawn: false


# ===================================================================
# Commands
# ===================================================================
command:
  # Default behavior of `/island` when used with no arguments.
  # Options:
  # - "help"   : show help
  # - "island" : teleport to island home if exists, otherwise create a new island
  base-command-mode: "island"


# ===================================================================
# Debug
# ===================================================================
# If true, prints more detailed logs.
debug: false
